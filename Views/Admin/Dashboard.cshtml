@model HolisticDepartmentExamSystem.Controllers.AdminDashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!-- Stats Grid -->
<div class="stats-grid fade-in-up">
    <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-label">Total Users</div>
        <div class="stat-value">@Model.TotalUsers</div>
    </div>

    <div class="stat-card success">
        <div class="stat-icon">üéì</div>
        <div class="stat-label">Total Students</div>
        <div class="stat-value">@Model.TotalStudents</div>
    </div>

    <div class="stat-card info">
        <div class="stat-icon">üìù</div>
        <div class="stat-label">Total Exams</div>
        <div class="stat-value">@Model.TotalExams</div>
    </div>

    <div class="stat-card warning">
        <div class="stat-icon">üî•</div>
        <div class="stat-label">Active Exams</div>
        <div class="stat-value">@Model.ActiveExams</div>
    </div>
</div>

<!-- Quick Actions -->
<div class="content-card fade-in-up">
    <div class="card-header">
        <h3 class="card-title">Quick Actions</h3>
    </div>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a asp-action="CreateUser" class="btn-custom btn-primary-custom">
            <span>‚ûï</span> Add New User
        </a>
        <a asp-action="CreateStudent" class="btn-custom btn-success-custom">
            <span>üéì</span> Add New Student
        </a>
        <a asp-action="ViewAllExams" class="btn-custom btn-outline-custom">
            <span>üìù</span> View All Exams
        </a>
        <a asp-action="SystemReports" class="btn-custom btn-outline-custom">
            <span>üìä</span> View Reports
        </a>
    </div>
</div>

<!-- Recent Activity Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem;">
    <!-- Recent Users -->
    <div class="content-card fade-in-up">
        <div class="card-header">
            <h3 class="card-title">Recent Users</h3>
            <a asp-action="ManageUsers" class="btn-custom btn-outline-custom btn-icon" title="View All">
                <span>üëÅÔ∏è</span>
            </a>
        </div>
        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Role</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.RecentUsers.Any())
                    {
                        @foreach (var user in Model.RecentUsers)
                        {
                            <tr>
                                <td>@user.Username</td>
                                <td>
                                    @if (user.Role != null)
                                    {
                                        <span class="badge-custom badge-active">@user.Role.RoleName</span>
                                    }
                                    else
                                    {
                                        <span class="badge-custom badge-inactive">N/A</span>
                                    }
                                </td>
                                <td>
                                    @if (user.Status)
                                    {
                                        <span class="badge-custom badge-active">Active</span>
                                    }
                                    else
                                    {
                                        <span class="badge-custom badge-inactive">Inactive</span>
                                    }
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="3" style="text-align: center; color: var(--text-secondary);">No recent users</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- Recent Exams -->
    <div class="content-card fade-in-up">
        <div class="card-header">
            <h3 class="card-title">Recent Exams</h3>
            <a asp-action="ViewAllExams" class="btn-custom btn-outline-custom btn-icon" title="View All">
                <span>üëÅÔ∏è</span>
            </a>
        </div>
        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.RecentExams.Any())
                    {
                        @foreach (var exam in Model.RecentExams)
                        {
                            <tr>
                                <td>@exam.Title</td>
                                <td>
                                    @if (exam.Status == "Published")
                                    {
                                        <span class="badge-custom badge-published">Published</span>
                                    }
                                    else if (exam.Status == "Draft")
                                    {
                                        <span class="badge-custom badge-draft">Draft</span>
                                    }
                                    else
                                    {
                                        <span class="badge-custom badge-closed">Closed</span>
                                    }
                                </td>
                                <td style="color: var(--text-secondary); font-size: 0.875rem;">
                                    @exam.CreatedAt.ToString("MMM dd, yyyy")
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="3" style="text-align: center; color: var(--text-secondary);">No recent exams</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- System Health Overview -->
<div class="content-card fade-in-up" style="margin-top: 1.5rem;">
    <div class="card-header">
        <h3 class="card-title">System Overview</h3>
        <a asp-action="SystemHealth" class="btn-custom btn-outline-custom">
            <span>üìä</span> View Details
        </a>
    </div>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚úÖ</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.25rem;">System Status</div>
            <div style="font-weight: 600; color: #2ed573;">Operational</div>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üíæ</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.25rem;">Database</div>
            <div style="font-weight: 600; color: #4facfe;">Connected</div>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üîí</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.25rem;">Security</div>
            <div style="font-weight: 600; color: #2ed573;">Secure</div>
        </div>
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚ö°</div>
            <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.25rem;">Performance</div>
            <div style="font-weight: 600; color: #2ed573;">Excellent</div>
        </div>
    </div>
</div>
